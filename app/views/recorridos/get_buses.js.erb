$.each(Gmaps.map.markers, function (index, marker){
		if(marker.type == 'bus' || marker.type == 'sign')
			Gmaps.map.clearMarker(marker);
	});

buses = <%== @buses2.to_json %> ;
stop_signs = [];
$.each(buses, function(index, bus) {
  // console.log(bus.patente);
  var polyline;
  if(bus.direction == "I")
  	polyline = Gmaps.map.polylines[0]
  else
  	polyline = Gmaps.map.polylines[1]
  move_bus_to_polyline(bus, polyline);
  // console.log(bus);
  if(bus.stop)
  {
    stop_signs.push({
      lat: bus.lat,
      lng: bus.lng,
      width: 18,
      height: 18,
      zindex: 1001,
      type: 'sign',
      picture: "../images/stop_18.png",
      description: bus.description
    });
  }
});

Gmaps.map.addMarkers(buses, false);
Gmaps.map.addMarkers(stop_signs, false);
$.each(Gmaps.map.markers, function (index, marker){
    if(marker.type == 'sign')
      marker.serviceObject.setAnimation(google.maps.Animation.BOUNCE);
  });
